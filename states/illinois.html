<!DOCTYPE html>
<html>
  <head>
    <title>Clinics Available in Illinois</title>
    <meta name="viewport" content="initial-scale=1.0">
    <meta charset="utf-8">
	<!-- Google Map plus markers from json file: http://stackoverflow.com/questions/28606149/load-data-from-json-file-into-map-markers-in-google-maps --> 
    <style>
	html, body, #map {
		height: 100%;
		width: 100%;
		margin: 0px;
		padding: 0px
	}
    </style>
	
  </head>
  
  <body>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
	<script src="https://maps.googleapis.com/maps/api/js"></script>
	<div id="map" style="border: 2px solid #3872ac;"></div>
	
	<script>
		var map;
		// http://www.latlong.net/convert-address-to-lat-long.html
		// var icon = "http://path/to/icon.png";
		var infowindow = new google.maps.InfoWindow();
		function initialize() {
			var centerOfState = {lat: 40.633125, lng: -89.398528};

			var mapProp = {
				center: centerOfState, //Macon
				zoom: 7,
				mapTypeId: google.maps.MapTypeId.ROADMAP
			};

			map = new google.maps.Map(document.getElementById("map"), mapProp);

			//  $.getJSON(json, function(json1) {
			var json1 = {
				"clinics":[
					{"title":"Bolingbrook Christian Health Center","streetadr":"151 E Briarcliff Rd","citystatezip":"Bolingbrook, IL 60440","phone":"(630) 783-2832","website":"www.bolingbrookchristianhealthcenter.com","stateus":"Illinois","lat":41.697643,"lng":-88.065026,"pprogram":true,"servicestpc":true,"servicesdnt":true,"servicesbeh":true},
					{"title":"Bureau County Health & Wellness Clinic NFP, Inc","streetadr":"500 Elm Pl","citystatezip":"Princeton, IL 61356","phone":"(815) 879-8794","website":"www.bchwclinic.org","stateus":"Illinois","lat":41.384227,"lng":-89.458276,"pprogram":false,"servicestpc":false,"servicesdnt":false,"servicesbeh":false},
					{"title":"Champaign County Christian Health Center","streetadr":"PO Box 5005","citystatezip":"Champaign, IL 61825-5005","phone":"(217) 398-2914","website":"www.ccchc2003.org","stateus":"Illinois","lat":40.121183,"lng":-88.243460,"pprogram":false,"servicestpc":true,"servicesdnt":true,"servicesbeh":false},
					{"title":"Christian Community Health Center","streetadr":"9718 S. Halsted","citystatezip":"Chicago, IL 60628","phone":"(773) 233-8524","website":"www.cchc-online.org","stateus":"Illinois","lat":41.716867,"lng":-87.643454,"pprogram":true,"servicestpc":true,"servicesdnt":true,"servicesbeh":true},
					{"title":"Circle Family HealthCare Network","streetadr":"5002 W Madison St","citystatezip":"Chicago, IL 60644","phone":"(773) 379-1000","website":"www.cfhcn.org","stateus":"Illinois","lat":41.880675,"lng":-87.750678,"pprogram":false,"servicestpc":true,"servicesdnt":false,"servicesbeh":true},
					{"title":"Cornerstone Family Health","streetadr":"534 Chestnut St, Ste 220","citystatezip":"Hinsdale, IL 60521","phone":"(630) 734-0580","website":"www.cornerstonefamilyhealthhome.com","stateus":"Illinois","lat":41.801027,"lng":-87.938482,"pprogram":true,"servicestpc":true,"servicesdnt":false,"servicesbeh":false},
					{"title":"Family Christian Health Center","streetadr":"31 W 155th St","citystatezip":"Harvey, IL 60426","phone":"(708) 596-5177","website":"familychc.org","stateus":"Illinois","lat":41.608558,"lng":-87.658013,"pprogram":true,"servicestpc":true,"servicesdnt":true,"servicesbeh":true},
					{"title":"Immanuel Health Center","streetadr":"502 S Morris, Ste D","citystatezip":"Bloomington, IL 61701","phone":"(309) 808-2778","website":"www.immanuelhealth.com","stateus":"Illinois","lat":40.474596,"lng":-89.005726,"pprogram":false,"servicestpc":true,"servicesdnt":false,"servicesbeh":false},
					{"title":"Lawndale Christian Health Center","streetadr":"3860 W Ogden Ave","citystatezip":"Chicago, IL 60623","phone":"(872) 588-3000","website":"www.lawndale.org","stateus":"Illinois","lat":41.852495,"lng":-87.721969,"pprogram":true,"servicestpc":true,"servicesdnt":false,"servicesbeh":true},
					{"title":"Tzedakah Christian Health Center","streetadr":"269 W. Eldorado St, PO Box 352","citystatezip":"Decatur, IL 62525","phone":"(217) 412-4176","website":"www.TCHCDecatur.org","stateus":"Illinois","lat":39.845614,"lng":-88.958812,"pprogram":false,"servicestpc":true,"servicesdnt":false,"servicesbeh":true}
			   ]};   

			$.each(json1.clinics, function (key, data) {

				var latLng = new google.maps.LatLng(data.lat, data.lng);

				var marker = new google.maps.Marker({
					position: latLng,
					map: map,
					// icon: icon,
					title: data.title
				});

				var typesOfClinicsAvailable = '';
				if (data.servicestpc){
					typesOfClinicsAvailable = 'Traditional Primary Care';
				}
				if (data.servicesdnt){
					if (typesOfClinicsAvailable != ''){
						typesOfClinicsAvailable = typesOfClinicsAvailable + ', ' + 'Dental';
					}
					else{
						typesOfClinicsAvailable = 'Dental';
					}
				}
				if (data.servicesbeh){
					if (typesOfClinicsAvailable != ''){
						typesOfClinicsAvailable = typesOfClinicsAvailable + ', ' + 'Behavioral Health/Counseling';
					}
					else{
						typesOfClinicsAvailable = 'Dental';
					}
				}
				if (typesOfClinicsAvailable != ''){
					typesOfClinicsAvailable = "<i>" + typesOfClinicsAvailable + '</i><br>';
				}
				var myWebsite = '';
				if (data.website != 'not available') {
					myWebsite = data.website + "<br>";
				}
				var details = "<b>" + data.title + "</b><br>" + typesOfClinicsAvailable + data.streetadr + "<br>" + data.citystatezip + "<br>" + data.phone + "<br>" + myWebsite;

				bindInfoWindow(marker, map, infowindow, details);

				//    });

			});

		}

		function bindInfoWindow(marker, map, infowindow, strDescription) {
			google.maps.event.addListener(marker, 'click', function () {
				infowindow.setContent(strDescription);
				infowindow.open(map, marker);
			});
		}

		google.maps.event.addDomListener(window, 'load', initialize);
	</script>
	
  </body>
</html>